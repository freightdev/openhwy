# monitoring/alertmanager.yml
global:
    smtp_smarthost: 'localhost:587'
    smtp_from: 'alerts@payment-service.com'

route:
    group_by: ['alertname', 'cluster', 'service']
    group_wait: 10s
    group_interval: 10s
    repeat_interval: 1h
    receiver: 'default'
    routes:
        - match:
              severity: critical
          receiver: 'critical'
        - match:
              severity: warning
          receiver: 'warning'

receivers:
    - name: 'default'
      email_configs:
          - to: 'ops@payment-service.com'
            subject: '[Payment Service] Alert: {{ .GroupLabels.alertname }}'
            body: |
                {{ range .Alerts }}
                Alert: {{ .Annotations.summary }}
                Description: {{ .Annotations.description }}
                Labels: {{ range .Labels.SortedPairs }}{{ .Name }}={{ .Value }} {{ end }}
                {{ end }}

    - name: 'critical'
      email_configs:
          - to: 'critical@payment-service.com'
            subject: '[CRITICAL] Payment Service Alert'
      slack_configs:
          - api_url: 'YOUR_SLACK_WEBHOOK_URL'
            channel: '#alerts-critical'
            title: 'Critical Alert - Payment Service'

    - name: 'warning'
      email_configs:
          - to: 'warnings@payment-service.com'
            subject: '[WARNING] Payment Service Alert'
